name: Make New Release
on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Release version to publish'
        required: true
        default: '0.0.0'
      minor-version:
        description: 'Release minor version to publish'
        required: true
        default: '1'
      release-notes:
        description: 'Release notes for the version to publish'
        required: true
        default: 'none'
      prerelease:
        description: 'Create a pre-release'
        required: false
        default: false

jobs:
  publish-release:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Set Env Var
        run: |
          $dir_sha = (Get-FileHash -Path .* -Algorithm SHA256).Hash
          echo "dir-sha=key-$($dir_sha)" >> $GITHUB_ENV
      
      - name: Use Env Var
        run: |
          echo "dir-sha: ${{ env.dir-sha }}"